!function(){"use strict";angular.module("app",["ngRoute","ngCookies"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"views/public/pages/listpage.html",controller:"listpage_controller"}).when("/bears/:id",{templateUrl:"views/public/pages/detailpage.html",controller:"detail_controller"}).when("/login",{templateUrl:"views/public/pages/login.html",controller:"login_controller"}).when("/cms",{templateUrl:"views/public/pages/cms.html",controller:"cms_controller"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}])}(),function(){"use strict";var e=function(e,t,n,r){var o=t.get("m-token");o||n.path("/login"),o&&r.authenticateToken(o).then(function(e){console.log("authenticateToken:",e),e.success||e.error&&n.path(e.redirect_url)})};angular.module("app").controller("cms_controller",["$scope","$cookies","$location","user_service",e])}(),function(){"use strict";var e=function(e,t){e.newBear={name:"",home:""},e.createBear=function(){e.newBear.name&&e.newBear.home&&t.create_bear(e.newBear).then(function(t){t.id&&t.name&&t.home&&(e.bears.push(t),e.newBear={name:"",home:""})})}};angular.module("app").controller("create_controller",["$scope","bear_service",e])}(),function(){"use strict";var e=function(e,t,n){n.get_bear_by_id(t.id).then(function(t){e.currentBear=t})};angular.module("app").controller("detail_controller",["$scope","$routeParams","bear_service",e])}(),function(){"use strict";var e=function(e,t){e.bears=[],t.get_bears().then(function(t){e.bears=t}),e.deleteBear=function(n){t.delete_bear(n.id).then(function(t){if("success"===t.msg){var r=e.bears.indexOf(n);r>-1&&e.bears.splice(r,1)}})}};angular.module("app").controller("listpage_controller",["$scope","bear_service",e])}(),function(){"use strict";var e=function(e,t,n){e.username="marijn",e.password="12345",e.login=function(){n.login(e.username,sha256(e.password)).then(function(e){t.path(e.redirect_url)})}};angular.module("app").controller("login_controller",["$scope","$location","user_service",e])}(),function(){"use strict";var e=function(e){return{get_bears:function(){return e.get("/api/bears").then(function(e){return e.data})},get_bear_by_id:function(t){return e.get("/api/bears/"+t).then(function(e){return e.data})},create_bear:function(t){return e.post("/api/bears",t).then(function(e){return e.data})},delete_bear:function(t){return e.put("/api/bears/"+t).then(function(e){return e.data})}}};angular.module("app").factory("bear_service",["$http",e])}(),function(){"use strict";var e=function(e){return{login:function(t,n){return e.post("/api/login",{login:t,password:n}).then(function(e){return e.data})},authenticateToken:function(t){return e.post("/api/authtoken",{"m-token":t}).then(function(e){return e.data})}}};angular.module("app").factory("user_service",["$http",e])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlci5qcyIsImNtc19jb250cm9sbGVyLmpzIiwiY3JlYXRlX2NvbnRyb2xsZXIuanMiLCJkZXRhaWxfY29udHJvbGxlci5qcyIsImxpc3RwYWdlX2NvbnRyb2xsZXIuanMiLCJsb2dpbl9jb250cm9sbGVyLmpzIiwiYmVhcl9zZXJ2aWNlLmpzIiwidXNlcl9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJodG1sNU1vZGUiLCJjbXNfY29udHJvbGxlciIsIiRzY29wZSIsIiRjb29raWVzIiwiJGxvY2F0aW9uIiwidXNlcl9zZXJ2aWNlIiwidG9rZW4iLCJnZXQiLCJwYXRoIiwiYXV0aGVudGljYXRlVG9rZW4iLCJ0aGVuIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwic3VjY2VzcyIsImVycm9yIiwicmVkaXJlY3RfdXJsIiwiY3JlYXRlX2NvbnRyb2xsZXIiLCJiZWFyX3NlcnZpY2UiLCJuZXdCZWFyIiwibmFtZSIsImhvbWUiLCJjcmVhdGVCZWFyIiwiY3JlYXRlX2JlYXIiLCJiZWFyIiwiaWQiLCJiZWFycyIsInB1c2giLCJkZXRhaWxfY29udHJvbGxlciIsIiRyb3V0ZVBhcmFtcyIsImdldF9iZWFyX2J5X2lkIiwiY3VycmVudEJlYXIiLCJsaXN0cGFnZV9jb250cm9sbGVyIiwiZ2V0X2JlYXJzIiwiZGVsZXRlQmVhciIsImRlbGV0ZV9iZWFyIiwibXNnIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwibG9naW5fY29udHJvbGxlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJsb2dpbiIsInNoYTI1NiIsIiRodHRwIiwiZGF0YSIsInBvc3QiLCJwdXQiLCJmYWN0b3J5IiwibS10b2tlbiJdLCJtYXBwaW5ncyI6IkNBQUEs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cUIsR0FBQUUsS0FBQSxhQUFBdkIsR0FBQWQsS0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFtQyxRQWNBWCxZQVZBLFNBQUFWLEdBQ0EsTUFBQW9CLEdBQUFHLElBQUEsY0FBQXZCLEdBQUFmLEtBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBbUMsU0FhQXhELFNBQUFDLE9BQUEsT0FBQTBELFFBQUEsZ0JBQUEsUUFBQS9CLE9DMUNBLFdBQ0EsWUFFQSxJQUFBYixHQUFBLFNBQUF3QyxHQWdCQSxPQUNBRixNQWZBLFNBQUFBLEVBQUFELEdBRUEsTUFBQUcsR0FBQUUsS0FBQSxjQUFBSixNQUFBQSxFQUFBRCxTQUFBQSxJQUFBaEMsS0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFtQyxRQWFBckMsa0JBVEEsU0FBQUgsR0FFQSxNQUFBdUMsR0FBQUUsS0FBQSxrQkFBQUcsVUFBQTVDLElBQUFJLEtBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBbUMsU0FXQXhELFNBQUFDLE9BQUEsT0FBQTBELFFBQUEsZ0JBQUEsUUFBQTVDIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1wibmdSb3V0ZVwiLCBcIm5nQ29va2llc1wiXSk7XG5cbiAgYXBwLmNvbmZpZyhbXCIkcm91dGVQcm92aWRlclwiLCBcIiRsb2NhdGlvblByb3ZpZGVyXCIsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvcHVibGljL3BhZ2VzL2xpc3RwYWdlLmh0bWxcIixcbiAgICAgICAgY29udHJvbGxlcjogXCJsaXN0cGFnZV9jb250cm9sbGVyXCJcbiAgICAgIH0pXG4gICAgICAud2hlbignL2JlYXJzLzppZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvcHVibGljL3BhZ2VzL2RldGFpbHBhZ2UuaHRtbFwiLFxuICAgICAgICBjb250cm9sbGVyOiBcImRldGFpbF9jb250cm9sbGVyXCJcbiAgICAgIH0pXG4gICAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9wdWJsaWMvcGFnZXMvbG9naW4uaHRtbFwiLFxuICAgICAgICBjb250cm9sbGVyOiBcImxvZ2luX2NvbnRyb2xsZXJcIlxuICAgICAgfSlcbiAgICAgIC53aGVuKCcvY21zJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9wdWJsaWMvcGFnZXMvY21zLmh0bWxcIixcbiAgICAgICAgY29udHJvbGxlcjogXCJjbXNfY29udHJvbGxlclwiXG4gICAgICB9KVxuICAgICAgLm90aGVyd2lzZSh7cmVkaXJlY3RUbzogXCIvXCJ9KTtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgfV0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBjbXNfY29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJGNvb2tpZXMsICRsb2NhdGlvbiwgdXNlcl9zZXJ2aWNlKSB7XG5cbiAgICAvLyBjaGVjayBmb3IgdmFsaWQgdG9rZW5cblxuICAgIHZhciB0b2tlbiA9ICRjb29raWVzLmdldChcIm0tdG9rZW5cIik7XG5cbiAgICBpZiAoIXRva2VuKSAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG5cbiAgICBpZiAodG9rZW4pIHtcblxuICAgICAgLy8gY2hlY2sgaWYgdGhpcyB0b2tlbiBpcyBsZWdpdFxuICAgICAgdXNlcl9zZXJ2aWNlLmF1dGhlbnRpY2F0ZVRva2VuKHRva2VuKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYXV0aGVudGljYXRlVG9rZW46XCIsIHJlc3BvbnNlKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAvLyBzdGF5IG9uIHBhZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgLy8gcmVkaXJlY3RcbiAgICAgICAgICAkbG9jYXRpb24ucGF0aChyZXNwb25zZS5yZWRpcmVjdF91cmwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cblxuICB9O1xuXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJjbXNfY29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkY29va2llc1wiLCBcIiRsb2NhdGlvblwiLCBcInVzZXJfc2VydmljZVwiLCBjbXNfY29udHJvbGxlcl0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBjcmVhdGVfY29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgYmVhcl9zZXJ2aWNlKSB7XG5cbiAgICAkc2NvcGUubmV3QmVhciA9IHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgaG9tZTogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNyZWF0ZUJlYXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgaWYgKCRzY29wZS5uZXdCZWFyLm5hbWUgJiYgJHNjb3BlLm5ld0JlYXIuaG9tZSkge1xuICAgICAgICBiZWFyX3NlcnZpY2UuY3JlYXRlX2JlYXIoJHNjb3BlLm5ld0JlYXIpLnRoZW4oZnVuY3Rpb24oYmVhcikge1xuXG4gICAgICAgICAgaWYgKGJlYXIuaWQgJiYgYmVhci5uYW1lICYmIGJlYXIuaG9tZSkge1xuICAgICAgICAgICAgJHNjb3BlLmJlYXJzLnB1c2goYmVhcik7XG4gICAgICAgICAgICAkc2NvcGUubmV3QmVhciA9IHtuYW1lOiAnJywgaG9tZTogJyd9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiY3JlYXRlX2NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiYmVhcl9zZXJ2aWNlXCIsIGNyZWF0ZV9jb250cm9sbGVyXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgZGV0YWlsX2NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcywgYmVhcl9zZXJ2aWNlKSB7XG5cblxuICAgIGJlYXJfc2VydmljZS5nZXRfYmVhcl9ieV9pZCgkcm91dGVQYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24oYmVhcikge1xuXG4gICAgICAkc2NvcGUuY3VycmVudEJlYXIgPSBiZWFyO1xuICAgIH0pO1xuICB9O1xuXG4gICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiZGV0YWlsX2NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiYmVhcl9zZXJ2aWNlXCIsIGRldGFpbF9jb250cm9sbGVyXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGxpc3RwYWdlX2NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIGJlYXJfc2VydmljZSkge1xuXG5cbiAgICAkc2NvcGUuYmVhcnMgPSBbXTtcblxuICAgIGJlYXJfc2VydmljZS5nZXRfYmVhcnMoKS50aGVuKGZ1bmN0aW9uKGJlYXJzKSB7XG4gICAgICAkc2NvcGUuYmVhcnMgPSBiZWFycztcbiAgICB9KTtcblxuICAgICRzY29wZS5kZWxldGVCZWFyID0gZnVuY3Rpb24oYmVhcikge1xuICAgICAgYmVhcl9zZXJ2aWNlLmRlbGV0ZV9iZWFyKGJlYXIuaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblxuICAgICAgICBpZiAocmVzcG9uc2UubXNnID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5iZWFycy5pbmRleE9mKGJlYXIpO1xuXG5cbiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgJHNjb3BlLmJlYXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gIH07XG5cbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImxpc3RwYWdlX2NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiYmVhcl9zZXJ2aWNlXCIsIGxpc3RwYWdlX2NvbnRyb2xsZXJdKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGxvZ2luX2NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgdXNlcl9zZXJ2aWNlKSB7XG5cbiAgICAkc2NvcGUudXNlcm5hbWUgPSBcIm1hcmlqblwiO1xuICAgICRzY29wZS5wYXNzd29yZCA9IFwiMTIzNDVcIjtcblxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICB1c2VyX3NlcnZpY2UubG9naW4oJHNjb3BlLnVzZXJuYW1lLCBzaGEyNTYoJHNjb3BlLnBhc3N3b3JkKSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXG4gICAgICAgICRsb2NhdGlvbi5wYXRoKHJlc3BvbnNlLnJlZGlyZWN0X3VybCk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJsb2dpbl9jb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRsb2NhdGlvblwiLCBcInVzZXJfc2VydmljZVwiLCBsb2dpbl9jb250cm9sbGVyXSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBiZWFyX3NlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCkge1xuXG4gICAgXG4gICAgdmFyIGdldF9iZWFycyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9iZWFycycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGdldF9iZWFyX2J5X2lkID0gZnVuY3Rpb24oaWQpIHtcblxuICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9iZWFycy8nICsgaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICB9KTtcblxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlX2JlYXIgPSBmdW5jdGlvbihiZWFyKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9iZWFycycsIGJlYXIpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGRlbGV0ZV9iZWFyID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYmVhcnMvJyArIGlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBnZXRfYmVhcnM6IGdldF9iZWFycyxcbiAgICAgIGdldF9iZWFyX2J5X2lkOiBnZXRfYmVhcl9ieV9pZCxcbiAgICAgIGNyZWF0ZV9iZWFyOiBjcmVhdGVfYmVhcixcbiAgICAgIGRlbGV0ZV9iZWFyOiBkZWxldGVfYmVhclxuICAgIH07XG5cbiAgfTtcblxuICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImJlYXJfc2VydmljZVwiLCBbXCIkaHR0cFwiLCBiZWFyX3NlcnZpY2VdKTtcblxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB1c2VyX3NlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCkge1xuXG4gICAgdmFyIGxvZ2luID0gZnVuY3Rpb24obG9naW4sIHBhc3N3b3JkKSB7XG5cbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ2luJywge1wibG9naW5cIjogbG9naW4sIFwicGFzc3dvcmRcIjogcGFzc3dvcmR9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBhdXRoZW50aWNhdGVUb2tlbiA9IGZ1bmN0aW9uKHRva2VuKSB7XG5cbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2F1dGh0b2tlbicsIHtcIm0tdG9rZW5cIjogdG9rZW59KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgbG9naW46IGxvZ2luLFxuICAgICAgYXV0aGVudGljYXRlVG9rZW46IGF1dGhlbnRpY2F0ZVRva2VuXG4gICAgfTtcblxuICB9O1xuXG4gICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwidXNlcl9zZXJ2aWNlXCIsIFtcIiRodHRwXCIsIHVzZXJfc2VydmljZV0pO1xuXG5cbn0pKCk7XG4iXX0=
